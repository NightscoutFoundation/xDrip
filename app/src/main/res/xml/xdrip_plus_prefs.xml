<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory
        android:key="xdrip_plus_category"
        android:title="@string/xdrip_plus_extra_settings" />
    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:icon="@drawable/ic_chart_areaspline_grey600_48dp"
        android:key="xdrip_plus_display_settings"
        android:summary="@string/display_customisations"
        android:title="@string/xdrip_plus_display_settings">

        <PreferenceCategory
            android:key="xdrip_plus_display_category"
            android:title="@string/xdrip_plus_display_settings">
            <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:app="http://schemas.android.com/apk/res-auto"

                android:icon="@drawable/ic_palette_grey600_48dp"
                android:key="xdrip_plus_color_settings"
                android:summary="@string/customize_colours"
                android:title="@string/xdrip_plus_color_settings">

                <com.eveningoutpost.dexdrip.utils.ExampleChartPreferenceView
                    android:key="example_chart"
                    android:summary=""
                    android:title="@string/example_chart" />

                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset1"
                    android:title="@string/glucose_values_and_lines">

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#FFBB33"
                        android:key="color_high_values"
                        android:title="@string/high_glucose_values"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#33B5E6"
                        android:key="color_inrange_values"
                        android:title="@string/in_range_glucose_values"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#C30909"
                        android:key="color_low_values"
                        android:title="@string/low_glucose_values"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#a0a0a0"
                        android:key="color_filtered"
                        android:title="@string/filtered_values"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                </PreferenceCategory>

                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset2"
                    android:title="@string/treatments_prediction_curves">
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#77aa00"
                        android:key="color_treatment"
                        android:title="@string/treatment_color"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#334400"
                        android:key="color_treatment_dark"
                        android:title="@string/treatment_color_dark"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#AA66CC"
                        android:key="color_predictive"
                        android:title="@string/predictive_color"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#7700aa"
                        android:key="color_predictive_dark"
                        android:title="@string/predictive_color_dark"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />


                </PreferenceCategory>

                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset3"
                    android:title="@string/average_and_target_lines">

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#558800"
                        android:key="color_average1_line"
                        android:title="@string/eight_hour_average_line"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#c56f9d"
                        android:key="color_average2_line"
                        android:title="@string/twenty_four_hour_average_line"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#a4a409"
                        android:key="color_target_line"
                        android:title="@string/glucose_target_line"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                </PreferenceCategory>

                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset4"
                    android:title="@string/annotations_and_dots">

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#FFFFFF"
                        android:key="color_calibration_dot_background"
                        android:title="@string/blood_test_background"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#FF4444"
                        android:key="color_calibration_dot_foreground"
                        android:title="@string/blood_test_foreground"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#FFFFFF"
                        android:key="color_treatment_dot_background"
                        android:title="@string/treatment_background"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#77aa00"
                        android:key="color_treatment_dot_foreground"
                        android:title="@string/treatment_foreground"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                </PreferenceCategory>
                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset5"
                    android:title="@string/backgrounds">
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#212121"
                        android:key="color_home_chart_background"
                        android:title="@string/main_chart_background"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#00000000"
                        android:key="color_notification_chart_background"
                        android:title="@string/notification_chart_background"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#00000000"
                        android:key="color_widget_chart_background"
                        android:title="@string/widget_chart_background"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                </PreferenceCategory>

                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset8"
                    android:title="Plugins and Features">

                <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                    android:defaultValue="#8a6b4c33"
                    android:dependency="plugin_plot_on_graph"
                    android:key="color_secondary_glucose_value"
                    android:title="@string/secondary_plugin_glucose_value"
                    app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                    app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                    app:colorpicker_showHex="false" />

                <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                    android:defaultValue="#3e29937b"
                    android:key="color_step_counter1"
                    android:title="@string/step_counter_1st_color"
                    app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                    app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                    app:colorpicker_showHex="false" />

                <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                    android:defaultValue="#3c72c3c0"
                    android:key="color_step_counter2"
                    android:title="@string/step_counter_2nd_color"
                    app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                    app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                    app:colorpicker_showHex="false" />

                <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                    android:defaultValue="#2B212FDE"
                    android:key="color_heart_rate1"
                    android:title="Heart rate monitor"
                    app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                    app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                    app:colorpicker_showHex="false" />
                </PreferenceCategory>
                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset12"
                    android:title="Insulin Colors">

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#D33172DE"
                        android:key="color_basal_tbr"
                        android:title="Basal TBR"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="true" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#D4DED843"
                        android:key="color_smb_icon"
                        android:title="SMB Icon"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#D6597FCC"
                        android:key="color_smb_line"
                        android:title="SMB Line"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                </PreferenceCategory>
                <PreferenceCategory
                    android:key="xdrip_plus_display_colorset9_android5plus"
                    android:title="@string/flair_colors">

                    <SwitchPreference
                        android:defaultValue="false"
                        android:key="use_flair_colors"
                        android:switchTextOff="@string/short_off_text_for_switches"
                        android:switchTextOn="@string/short_on_text_for_switches"
                        android:title="@string/use_flair_colors" />
                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#00000000"
                        android:key="color_upper_flair_bar"
                        android:title="@string/upper_title_bar_flair"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                    <com.eveningoutpost.dexdrip.UtilityModels.ColorPicker
                        android:defaultValue="#FF000000"
                        android:key="color_lower_flair_bar"
                        android:title="@string/lower_button_bar_falir"
                        app:colorpicker_noneSelectedSummaryText="@string/default_color_selected"
                        app:colorpicker_selectNoneButtonText="@string/revert_to_default"
                        app:colorpicker_showHex="false" />

                </PreferenceCategory>
            </PreferenceScreen>


            <SwitchPreference
                android:defaultValue="false"
                android:key="force_english"
                android:summary="@string/using_local_language"
                android:summaryOn="@string/forcing_alternate_language"
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="@string/force_english_text" />
            <ListPreference
                android:defaultValue="en"
                android:entries="@array/LocaleChoices"
                android:entryValues="@array/LocaleChoicesValues"
                android:key="forced_language"
                android:summary="@string/need_alternate_language"
                android:title="@string/chosse_language" />

            <SwitchPreference
                android:defaultValue="true"
                android:key="bg_compensate_noise"
                android:summary="@string/try_to_work_around_noisy_readings"
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="\u26A0 Smooth sensor noise" />
            <SwitchPreference
                android:defaultValue="false"
                android:dependency="bg_compensate_noise"
                android:key="bg_compensate_noise_ultrasensitive"
                android:summary="@string/try_to_work_around_noisy_readings_ultrasensitive"
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="\u26A0 Smooth sensor noise ultrasensitive" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_showcase"
                android:summary="@string/show_tips_hints"
                android:title="@string/show_interface_hints" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="rewrite_history"
                android:summary="@string/after_calibration_rewrite_history"
                android:title="@string/rewrite_history" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="widget_range_lines"
                android:summary="@string/show_range_on_widget"
                android:title="@string/widget_range_lines" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_graph_grid_time"
                android:summary="@string/grid_time_lines_visible"
                android:title="@string/show_graph_time_lines" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_graph_grid_glucose"
                android:summary="@string/grid_glucose_lines_visible"
                android:title="@string/show_graph_glucose_lines" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_filtered_curve"
                android:summary="@string/useful_for_noise_and_missed_readings"
                android:title="@string/display_filtered_plot" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_raw_plot"
                android:summary="@string/the_standard_xdrip_calculated_value"
                android:title="@string/display_raw_plot_data" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_basal_line"
                android:summary="Show TBR information from external status"
                android:title="Show Basal TBR" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_target_line"
                android:summary="@string/display_ideal_glucose_target_line"
                android:title="@string/show_graph_target_line" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_recent_average_line"
                android:summary="@string/display_eight_hour_average_line"
                android:title="@string/show_graph_recent_average" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_full_average_line"
                android:summary="@string/display_twenty_four_hour_average_line"
                android:title="@string/show_graph_total_average" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_libre_trend_line"
                android:summary=""
                android:title="@string/show_libre_trend" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_g_prediction"
                android:summary="Show G6 predictive glucose dots"
                android:title="G6 Prediction" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_smb_icons"
                android:summary="Declutter graph with treatment icons for small boluses"
                android:title="Show micro bolus icons" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="show_medtrum_secondary"
                android:summary="Show alternate glucose dots"
                android:title="Medtrum Secondary" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_momentum_working_line"
                android:summary="@string/predictive_model_inner_workings"
                android:title="@string/show_momentum_working_curve" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_noise_workings"
                android:summary="@string/noise_model_inner_workings"
                android:title="@string/show_noise_workings" />
            <CheckBoxPreference
                android:key="illustrate_backfilled_data"
                android:summary="Indicate backfilled data on chart" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="bg_from_filtered"
                android:summary="@string/delayed_but_more_stable"
                android:title="@string/glucose_number_from_filtered" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="show_bwp"
                android:summary="@string/display_calculations"
                android:title="@string/show_bolus_wizard_preview" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:dependency="show_bwp"
                android:key="always_show_bwp"
                android:summary="@string/display_calculations_everytime"
                android:title="@string/always_show_bolus_wizard_preview" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="high_priority_notifications"
                android:summary="Show notifications and graph at the top (also useful on lockscreen)"
                android:title="High Priority Notifications" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="public_notifications"
                android:summary="Show notification content on secure lockscreen"
                android:title="Public Notifications" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="plus_extra_features"
                android:summary="@string/show_test_features"
                android:title="@string/parakeet_and_extra_features" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="plus_show_reminders"
                android:summary="@string/show_reminder_features"
                android:title="@string/enable_reminder_features" />
            <PreferenceScreen
                android:key="xdrip_plus_number_icon"
                android:title="Number Icon in Notification Area">
                <Preference
                    android:key="do_number_icon_test"
                    android:summary="Number icons crash some phones! Tap to run the test before enabling the feature!"
                    android:title="Run Number Icon Test">
                    <intent
                        android:action="android.intent.action.MAIN"
                        android:targetClass="com.eveningoutpost.dexdrip.Home"
                        android:targetPackage="@string/local_target_package">
                        <extra
                            android:name="numberIconTest"
                            android:value="numberIconTest" />
                    </intent>
                </Preference>
                <SwitchPreference
                    android:defaultValue="false"
                    android:key="number_icon_tested"
                    android:summary="When you have confirmed your device can display a number icon"
                    android:switchTextOff="@string/short_off_text_for_switches"
                    android:switchTextOn="@string/short_on_text_for_switches"
                    android:title="Number Icon tested" />
                <SwitchPreference
                    android:defaultValue="false"
                    android:dependency="number_icon_tested"
                    android:key="use_number_icon"
                    android:summary="Shows the current glucose number as an icon for the notification bar and lock screen"
                    android:switchTextOff="@string/short_off_text_for_switches"
                    android:switchTextOn="@string/short_on_text_for_switches"
                    android:title="Show Small Number Icon" />
                <SwitchPreference
                    android:defaultValue="false"
                    android:dependency="number_icon_tested"
                    android:key="use_number_icon_large"
                    android:summary="Shows a larger icon in the notification area only visible when opened"
                    android:switchTextOff="@string/short_off_text_for_switches"
                    android:switchTextOn="@string/short_on_text_for_switches"
                    android:title="Use Large Number Icon" />
                <SwitchPreference
                    android:defaultValue="false"
                    android:dependency="use_number_icon_large"
                    android:key="number_icon_large_arrow"
                    android:summary="Shows the trend arrow in the large icon"
                    android:switchTextOff="@string/short_off_text_for_switches"
                    android:switchTextOn="@string/short_on_text_for_switches"
                    android:title="Show Arrow in Large Icon" />
            </PreferenceScreen>
            <SwitchPreference
                android:defaultValue="false"
                android:key="show_home_on_boot"
                android:summary="Bring up xDrip screen automatically after device boots"
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="Show xDrip on Boot" />

        </PreferenceCategory>
    </PreferenceScreen>

    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:dependency="I_understand"
        android:icon="@drawable/ic_auto_fix_grey600_48dp"
        android:key="xdrip_plus_profile_settings"
        android:summary="@string/insulin_carb_ratios_etc_for_models"
        android:title="@string/xdrip_plus_prediction_settings">


        <PreferenceCategory
            android:key="xdrip_plus_profile_category"
            android:title="@string/xdrip_plus_prediction_settings">
            <SwitchPreference
                android:defaultValue="true"
                android:key="simulations_enabled"
                android:summary="@string/display_mathamatical_simulations"
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="@string/predictive_simulations" />

            <Preference
                android:key="profile_carb_ratio_default"
                android:summary="@string/grams_of_carbohydrate_one_unit_covers"
                android:title="@string/carb_ratio">
                <intent
                    android:action="android.intent.action.MAIN"
                    android:targetClass="com.eveningoutpost.dexdrip.profileeditor.ProfileEditor"
                    android:targetPackage="@string/local_target_package" />
            </Preference>
            <Preference
                android:key="profile_insulin_sensitivity_default"
                android:summary="@string/glucose_drop_for_one_unit"
                android:title="@string/insulin_sensitivity">
                <intent
                    android:action="android.intent.action.MAIN"
                    android:targetClass="com.eveningoutpost.dexdrip.profileeditor.ProfileEditor"
                    android:targetPackage="@string/local_target_package" />
            </Preference>
            <EditTextPreference
                android:defaultValue="35"
                android:key="profile_carb_absorption_default"
                android:summary="@string/linear_model_carbs_absorbed_per_hour"
                android:title="@string/carb_absorption_rate" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:key="predict_use_momentum"
                android:summary="@string/calculate_including_glucose_trend"
                android:title="@string/use_trend_momentum" />

        </PreferenceCategory>
        <PreferenceCategory
            android:key="title_I_understandb"
            android:title="EULA">
            <Preference
                android:key="I_understandb"
                android:summary="@string/not_for_medical_use"
                android:title="@string/end_user_license_agreement">
                <intent
                    android:action="android.intent.action.MAIN"
                    android:targetClass="com.eveningoutpost.dexdrip.LicenseAgreementActivity"
                    android:targetPackage="@string/local_target_package" />
            </Preference>
        </PreferenceCategory>

        <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
            android:dependency="I_understand"
            android:key="xdrip_plus_adv_predict"
            android:summary="@string/deel_settings_for_algs"
            android:title="@string/low_prediction_values">


            <PreferenceCategory
                android:key="xdrip_plus_adv_predict_cat"
                android:title="@string/low_level_prediction_values">

                <EditTextPreference
                    android:defaultValue="100"
                    android:inputType="numberDecimal"
                    android:key="plus_target_range"
                    android:summary=""
                    android:title="@string/target_glucose_default" />
                <EditTextPreference
                    android:defaultValue="3.0"
                    android:inputType="numberDecimal"
                    android:key="xplus_insulin_dia"
                    android:summary=""
                    android:title="@string/insulin_duration_hours" />

                <EditTextPreference
                    android:defaultValue="2"
                    android:inputType="numberDecimal"
                    android:key="xplus_liver_sensitivity"
                    android:summary=""
                    android:title="@string/default_liver_sensitivity_ratio" />
                <EditTextPreference
                    android:defaultValue="0.8"
                    android:inputType="numberDecimal"
                    android:key="xplus_liver_maximpact"
                    android:summary=""
                    android:title="@string/default_liver_maximum_impact" />
            </PreferenceCategory>
        </PreferenceScreen>


    </PreferenceScreen>

    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:dependency="I_understand"
        android:icon="@drawable/ic_google_circles_communities_grey600_48dp"
        android:key="xdrip_plus_sync_settings"
        android:summary="@string/settings_for_syncing"
        android:title="@string/xdrip_plus_sync_settings">


        <PreferenceCategory
            android:key="xdrip_plus_sync_category"
            android:title="@string/xdrip_plus_sync_settings">

            <CheckBoxPreference
                android:defaultValue="true"
                android:enabled="false"
                android:key="use_custom_sync_key"
                android:summary="@string/key_is_used_instead_of_google_account"
                android:title="@string/sync_using_custom_security_key" />
            <EditTextPreference
                android:defaultValue=""
                android:key="custom_sync_key"
                android:summary="@string/handset_sync_grouping_key"
                android:title="@string/handset_group_security_key" />
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="plus_follow_master"
                android:summary="@string/this_device_will_send_data_to_followers"
                android:title="@string/be_master_for_followers" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:dependency="plus_follow_master"
                android:key="plus_accept_follower_actions"
                android:summary="Treatments and Calibrations from followers will be accepted"
                android:title="Accept follower actions" />
            <CheckBoxPreference
                android:defaultValue="true"
                android:dependency="plus_follow_master"
                android:key="plus_follow_geolocation"
                android:summary="@string/send_parakeet_map_location_to_followers"
                android:title="@string/sync_parakeet_geolocation" />
            <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                android:key="xdrip_plus_remote_snooze_settings"
                android:summary="@string/remote_snoozes"
                android:title="@string/remote_snoozing">
                <CheckBoxPreference
                    android:defaultValue="false"
                    android:key="send_snooze_to_remote"
                    android:summary="@string/snoozes_will_silence_all"
                    android:title="@string/send_snooze_to_all" />
                <CheckBoxPreference
                    android:defaultValue="false"
                    android:dependency="send_snooze_to_remote"
                    android:key="confirm_snooze_to_remote"
                    android:summary="@string/confirm_remote_snoozes"
                    android:title="@string/confirm_sensing_snooze" />
                <CheckBoxPreference
                    android:defaultValue="false"
                    android:key="accept_remote_snoozes"
                    android:summary="@string/allow_remotes_silence"
                    android:title="@string/acccept_remote_snoozes" />
                <CheckBoxPreference
                    android:defaultValue="true"
                    android:dependency="accept_remote_snoozes"
                    android:key="remote_snoozes_wifi_match"
                    android:summary="@string/only_accept_same_network"
                    android:title="@string/wifi_name_must_match" />
            </PreferenceScreen>
            <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
                android:key="xdrip_plus_desert_sync_settings"
                android:summary="Off-Grid following"
                android:icon="@drawable/desert_sync"
                android:title="Desert Sync">
                <SwitchPreference
                    android:defaultValue="false"
                    android:key="desert_sync_enabled"
                    android:summary="Enabled local non-internet sync facilities"
                    android:switchTextOff="@string/short_off_text_for_switches"
                    android:switchTextOn="@string/short_on_text_for_switches"
                    android:title="Desert Sync" />
                <EditTextPreference
                    android:defaultValue=""
                    android:dependency="desert_sync_enabled"
                    android:key="desert_sync_master_ip"
                    android:maxLength="15"
                    android:title="Master IP address" />
                <Preference
                    android:key="send_sync_show_qr"
                    android:dependency="desert_sync_enabled"
                    android:summary="Barcode for followers to scan to auto-configure them"
                    android:title="Show QR Code">
                    <intent
                        android:action="xdrip_plus_desert_sync_qr"
                        android:targetClass="com.eveningoutpost.dexdrip.utils.DisplayQRCode"
                        android:targetPackage="@string/local_target_package" />
                </Preference>
                <CheckBoxPreference
                    android:defaultValue="false"
                    android:key="desert_use_https"
                    android:summary="Add another layer of encryption for shared networks, eg public wifi"
                    android:title="Use HTTPS" />

            </PreferenceScreen>
            <CheckBoxPreference
                android:defaultValue="false"
                android:key="disable_all_sync"
                android:summary="@string/temporary_work_around_disable_all_sync_detail"
                android:title="@string/disable_all_sync_features" />
        </PreferenceCategory>
    </PreferenceScreen>

    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:icon="@drawable/ic_car_connected_grey600_48dp"
        android:key="xdrip_plus_motion_settings"
        android:summary="@string/movement_detection_and_vehicle_mode"
        android:title="@string/xdrip_motion_tracking">
        <SwitchPreference
            android:defaultValue="false"
            android:key="motion_tracking_enabled"
            android:summary="@string/detect_motion_types"
            android:switchTextOff="@string/short_off_text_for_switches"
            android:switchTextOn="@string/short_on_text_for_switches"
            android:title="@string/enable_motion_tracking" />
        <CheckBoxPreference
            android:defaultValue="true"
            android:dependency="motion_tracking_enabled"
            android:key="plot_motion"
            android:summary="@string/display_motion_types"
            android:title="@string/log_and_plot_motion" />
        <CheckBoxPreference
            android:defaultValue="false"
            android:dependency="motion_tracking_enabled"
            android:key="use_remote_motion"
            android:summary="@string/use_remote_motion_data"
            android:title="@string/use_remote_motion" />
        <CheckBoxPreference
            android:defaultValue="false"
            android:dependency="motion_tracking_enabled"
            android:key="act_as_motion_master"
            android:summary="@string/be_motion_master"
            android:title="@string/act_as_motion_master" />
        <SwitchPreference
            android:defaultValue="false"
            android:key="vehicle_mode_enabled"
            android:summary="@string/vehicle_motion_extras"
            android:switchTextOff="@string/short_off_text_for_switches"
            android:switchTextOn="@string/short_on_text_for_switches"
            android:title="@string/enable_vehicle_mode" />
        <SwitchPreference
            android:defaultValue="false"
            android:dependency="vehicle_mode_enabled"
            android:key="vehicle_mode_via_car_audio"
            android:summary="@string/automatically_enable_when_connected_to_car_bluetooth"
            android:switchTextOff="@string/short_off_text_for_switches"
            android:switchTextOn="@string/short_on_text_for_switches"
            android:title="@string/detect_car_audio" />
        <Preference
            android:dependency="vehicle_mode_enabled"
            android:key="learn_this_audio_device"
            android:summary="@string/tap_to_set_current_car_audio_device"
            android:title="@string/learn_current_car_audio">
            <intent
                android:action="android.intent.action.MAIN"
                android:targetClass="com.eveningoutpost.dexdrip.ui.activities.SelectAudioDevice"
                android:targetPackage="@string/local_target_package">
                <extra
                    android:name="none"
                    android:value="none" />
            </intent>
        </Preference>
        <CheckBoxPreference
            android:defaultValue="false"
            android:dependency="vehicle_mode_enabled"
            android:key="raise_low_limit_in_vehicle_mode"
            android:summary="@string/increase_low_alarms_vehicle_mode"
            android:title="@string/raise_low_threshold" />
        <CheckBoxPreference
            android:defaultValue="false"
            android:dependency="vehicle_mode_enabled"
            android:key="speak_readings_in_vehicle_mode"
            android:title="@string/speak_readings"
            android:summary="@string/enable_speak_readings_when_in_vehicle"/>
        <CheckBoxPreference
            android:defaultValue="true"
            android:dependency="vehicle_mode_enabled"
            android:key="play_sound_in_vehicle_mode"
            android:summary="@string/notification_sound_vehicle_mode"
            android:title="@string/play_sound" />
        <CheckBoxPreference
            android:defaultValue="true"
            android:dependency="vehicle_mode_enabled"
            android:key="repeat_sound_in_vehicle_mode"
            android:summary="@string/repeat_notification_every_90_minutes"
            android:title="@string/repeat_sound" />
    </PreferenceScreen>


    <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
        android:icon="@drawable/ic_briefcase_download_grey600_48dp"
        android:key="xdrip_plus_update_settings"
        android:summary="@string/automatic_updates_crash_reports_and_feedback"
        android:title="@string/xdrip_plus_update_settings">
        <SwitchPreference
            android:defaultValue="true"
            android:key="auto_update_download"
            android:summaryOff="New releases often have bugs fixed. It is recommended to switch on update notifications!"
            android:summaryOn="@string/get_notified_of_new_apk_releases"
            android:switchTextOff="@string/short_off_text_for_switches"
            android:switchTextOn="@string/short_on_text_for_switches"
            android:title="@string/automatic_update_check" />
        <ListPreference
            android:defaultValue="beta"
            android:dependency="auto_update_download"
            android:entries="@array/UpdateChannelDetail"
            android:entryValues="@array/UpdateChannel"
            android:key="update_channel"
            android:shouldDisableView="true"
            android:summary="@string/choose_stable_beta_or_alpha_releases"
            android:title="@string/update_channel" />
        <CheckBoxPreference
            android:defaultValue="true"
            android:key="enable_crashlytics"
            android:summary="@string/send_crash_errors_to_developer"
            android:title="@string/automatic_crash_reporting" />
        <CheckBoxPreference
            android:defaultValue="true"
            android:dependency="enable_crashlytics"
            android:key="enable_telemetry"
            android:summary="@string/send_data_to_developers"
            android:title="@string/enable_telemetry" />
        <Preference
            android:key="send_feedback"
            android:summary="@string/web_feedback_form_for_sending_messages"
            android:title="@string/send_feedback_message">
            <intent
                android:action="xdrip_plus_send_developer_feedback"
                android:targetClass="com.eveningoutpost.dexdrip.UtilityModels.SendFeedBack"
                android:targetPackage="@string/local_target_package" />
        </Preference>
    </PreferenceScreen>

    <PreferenceCategory
        android:key="xdrip_plus_move_settings"
        android:title="@string/copying_settings">
        <Preference
            android:icon="@drawable/ic_qrcode_grey600_48dp"
            android:key="show_qr_codes"
            android:title="@string/show_settings_qr_codes">
            <intent
                android:action="android.intent.action.MAIN"
                android:targetClass="com.eveningoutpost.dexdrip.utils.DisplayQRCode"
                android:targetPackage="@string/local_target_package" />
        </Preference>
        <Preference
            android:icon="@drawable/ic_content_save_grey600_48dp"
            android:key="show_external_save"
            android:title="@string/load_save_settings_to_sdcard">
            <intent
                android:action="android.intent.action.MAIN"
                android:targetClass="com.eveningoutpost.dexdrip.utils.SdcardImportExport"
                android:targetPackage="@string/local_target_package" />
        </Preference>
    </PreferenceCategory>
    <PreferenceCategory
        android:key="xdrip_plus_experimental"
        android:title="Experimental Section">

        <PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
            android:icon="@drawable/ic_mode_edit_grey_600_48dp"
            android:key="pendiq_screen"
            android:summary="Reading and writing dosages"
            android:title="Pendiq 2.0 Insulin Pen">
            <SwitchPreference
                android:defaultValue="false"
                android:key="use_pendiq"
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="Pendiq 2.0 Support" />

            <SwitchPreference
                android:defaultValue="false"
                android:dependency="use_pendiq"
                android:key="pendiq_send_treatments"
                android:summary="Prepare the pen with entered treatment insulin units. You must always double check this."
                android:switchTextOff="@string/short_off_text_for_switches"
                android:switchTextOn="@string/short_on_text_for_switches"
                android:title="Send Treatments to Pen" />

            <EditTextPreference
                android:defaultValue="@string/zero_zero_zero_zero"
                android:dependency="use_pendiq"
                android:inputType="numberPassword|textVisiblePassword"
                android:key="pendiq_pin"
                android:maxLength="4"
                android:title="Pen Pin Code" />


        </PreferenceScreen>

    </PreferenceCategory>
</PreferenceScreen>
